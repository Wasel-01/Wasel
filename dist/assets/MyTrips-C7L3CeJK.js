import{j as e,k as M,w as P,r as o,C as v,b as I,d as R,a as f,B as r,x as O,y as z,z as b,E as w,A as S,f as L,U as W}from"./index-BlO5FomV.js";import{B as d}from"./badge-Djeb3XUd.js";import{D as B,a as H,b as U,c as _}from"./dialog-J95OrPo5.js";import{M as $}from"./MapComponent-iD1FTxJ7.js";import{M as N}from"./map-pin-Cjx9PomE.js";import{N as D}from"./navigation-CwehXSWa.js";import{C as V}from"./circle-alert-CoTJSgY4.js";import{S as q}from"./share-2-CoEz52dN.js";const F=P("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function J({className:l,variant:t,...m}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:M(F({variant:t}),l),...m})}function G({className:l,...t}){return e.jsx("div",{"data-slot":"alert-description",className:M("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",l),...t})}function Y({tripId:l,route:t,isDriver:m=!1,allowLocationSharing:u=!0,onShareLocation:j}){const[x,s]=o.useState(null),[i,h]=o.useState(!1),[A,y]=o.useState(null),[g,T]=o.useState(null),k=()=>{if(!navigator.geolocation){y("Geolocation is not supported by your browser");return}y(null);const p={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},a=navigator.geolocation.watchPosition(n=>{const c={lat:n.coords.latitude,lng:n.coords.longitude};s(c),h(!0),j&&j(c)},n=>{let c="Unable to retrieve your location";switch(n.code){case n.PERMISSION_DENIED:c="Location permission denied. Please enable location access in your browser settings.";break;case n.POSITION_UNAVAILABLE:c="Location information unavailable";break;case n.TIMEOUT:c="Location request timed out";break}y(c),h(!1)},p);T(a)},E=()=>{g!==null&&(navigator.geolocation.clearWatch(g),T(null)),h(!1),s(null)};o.useEffect(()=>()=>{g!==null&&navigator.geolocation.clearWatch(g)},[g]);const C=t.map((p,a)=>({...p,type:a===0?"start":a===t.length-1?"destination":"stop"}));return x&&i&&C.push({lat:x.lat,lng:x.lng,label:m?"Your Location (Driver)":"Your Location",type:"current"}),e.jsxs(v,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-primary"}),"Live Trip Map"]}),i&&e.jsxs(d,{variant:"default",className:"bg-primary",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Tracking Active"]})]})}),e.jsxs(f,{className:"space-y-4",children:[A&&e.jsxs(J,{variant:"destructive",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx(G,{children:A})]}),u&&e.jsxs("div",{className:"flex gap-2",children:[i?e.jsx(r,{onClick:E,variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/10",children:"Stop Sharing"}):e.jsxs(r,{onClick:k,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Share My Location"]}),i&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-primary/5 text-primary rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm",children:["Location shared with ",m?"passengers":"driver"]})]})]}),e.jsx($,{locations:C,showRoute:!0,height:"500px"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm",children:"Route Details"}),e.jsx("div",{className:"space-y-2",children:t.map((p,a)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:`
                  w-6 h-6 rounded-full flex items-center justify-center text-xs
                  ${a===0?"bg-primary text-primary-foreground":a===t.length-1?"bg-accent text-accent-foreground":"bg-secondary text-secondary-foreground"}
                `,children:a===0?"A":a===t.length-1?"B":a}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:p.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a===0?"Starting Point":a===t.length-1?"Final Destination":`Stop ${a}`})]})]},a))})]})]})]})}function ne(){const[l,t]=o.useState(null),[m,u]=o.useState(!1),j=s=>{t(s),u(!0)},x=s=>{console.log("Location shared:",s)};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Trips"}),e.jsx("p",{className:"text-gray-600",children:"Manage your upcoming and past journeys"})]}),e.jsxs(O,{defaultValue:"upcoming",className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(b,{value:"upcoming",children:"Upcoming"}),e.jsx(b,{value:"as-driver",children:"As Driver"}),e.jsx(b,{value:"completed",children:"Completed"})]}),e.jsx(w,{value:"upcoming",className:"space-y-4",children:Q.map(s=>e.jsx(v,{children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:s.type==="wasel"?"default":"secondary",children:s.type==="wasel"?"Wasel (واصل)":"Raje3 (راجع)"}),e.jsx(d,{variant:"outline",children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(S,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.seats," seats booked"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:s.driver.initials})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.driver.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.driver.vehicle})]})]})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-primary",children:["$",s.totalPrice]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total price"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>j(s),className:"gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),"Track Live"]}),e.jsx(r,{variant:"outline",size:"sm",children:"Contact Driver"}),e.jsx(r,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"Cancel"})]})]})]})})},s.id))}),e.jsx(w,{value:"as-driver",className:"space-y-4",children:K.map(s=>e.jsx(v,{children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:s.type==="wasel"?"default":"secondary",children:s.type==="wasel"?"Wasel (واصل)":"Raje3 (راجع)"}),e.jsxs(d,{variant:"outline",children:[s.booked,"/",s.totalSeats," seats booked"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(S,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.date," at ",s.time]})]}),s.passengers.length>0&&e.jsxs("div",{className:"pt-3 border-t",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Passengers:"}),e.jsx("div",{className:"space-y-2",children:s.passengers.map((i,h)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:i.initials})}),e.jsx("span",{children:i.name}),e.jsxs("span",{className:"text-gray-500",children:["• ",i.seats," seat(s)"]})]},h))})]})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-primary",children:["$",s.earnings]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Est. earnings"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(r,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"Cancel Trip"})]})]})]})})},s.id))}),e.jsx(w,{value:"completed",className:"space-y-4",children:X.map(s=>e.jsx(v,{className:"opacity-75",children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"}),e.jsx(d,{variant:s.type==="wasel"?"default":"secondary",children:s.type==="wasel"?"Wasel":"Raje3"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(S,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.date})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl",children:["$",s.price]})}),e.jsx(r,{variant:"outline",size:"sm",children:"Rate Driver"})]})]})})},s.id))})]}),l&&e.jsx(B,{open:m,onOpenChange:u,children:e.jsxs(H,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(U,{children:e.jsx(_,{children:"Live Trip Tracking"})}),e.jsx(Y,{tripId:l.id.toString(),route:l.route||[],isDriver:!1,allowLocationSharing:!0,onShareLocation:x})]})})]})}const Q=[{id:1,type:"wasel",status:"Confirmed",from:"Dubai",to:"Abu Dhabi",date:"Oct 3, 2025",time:"08:00 AM",seats:2,totalPrice:90,driver:{name:"Ahmed Hassan",initials:"AH",vehicle:"Toyota Camry • White"},route:[{label:"Dubai Mall",lat:25.1972,lng:55.2744},{label:"Dubai Marina",lat:25.0805,lng:55.1396},{label:"Jebel Ali",lat:24.9857,lng:55.0272},{label:"Abu Dhabi Downtown",lat:24.4539,lng:54.3773}]},{id:2,type:"raje3",status:"Pending",from:"Riyadh",to:"Jeddah",date:"Oct 5, 2025",time:"06:00 AM",seats:1,totalPrice:120,driver:{name:"Sarah Mohammed",initials:"SM",vehicle:"Honda Accord • Silver"},route:[{label:"Riyadh City Center",lat:24.7136,lng:46.6753},{label:"Al Qassim",lat:26.326,lng:43.975},{label:"Medina",lat:24.5247,lng:39.5692},{label:"Jeddah Corniche",lat:21.5433,lng:39.1728}]}],K=[{id:1,type:"wasel",from:"Cairo",to:"Alexandria",date:"Oct 4, 2025",time:"10:00 AM",totalSeats:4,booked:2,pricePerSeat:35,earnings:70,passengers:[{name:"Mohamed Ali",initials:"MA",seats:1},{name:"Layla Ahmed",initials:"LA",seats:1}],route:[{label:"Cairo Downtown",lat:30.0444,lng:31.2357},{label:"Giza Pyramids",lat:29.9792,lng:31.1342},{label:"Wadi El Natrun",lat:30.3833,lng:30.35},{label:"Alexandria Corniche",lat:31.2001,lng:29.9187}]}],X=[{id:1,type:"wasel",from:"Amman",to:"Aqaba",date:"Sep 28, 2025",price:65},{id:2,type:"raje3",from:"Manama",to:"Muharraq",date:"Sep 25, 2025",price:20}];export{ne as MyTrips};
