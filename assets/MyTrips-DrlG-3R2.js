import{j as e,r as s}from"./ui-CdBhIjHZ.js";import{C as a,b as t,c as l,a as i,B as r}from"./index-DCGLpGXa.js";import{T as n,a as c,b as d,c as o}from"./tabs-C60opJ2P.js";import{B as m}from"./badge-r3WnqSNm.js";import{D as x,a as h,b as u,c as p}from"./dialog-BSZWDt91.js";import{M as j}from"./MapComponent-Dl03AF91.js";import{c as g}from"./utils-BeLtu-UY.js";import{c as v}from"./utils-f_7zD0yq.js";import{g as f,N,K as y,O as b,A as w,i as A,U as S}from"./icons-qmpYOd28.js";import"./supabase-BfaVHYeC.js";import"./vendor--zLKLCTa.js";const M=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,C=g,D=(L="relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",k={variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}},e=>{var s;if(null==(null==k?void 0:k.variants))return C(L,null==e?void 0:e.class,null==e?void 0:e.className);const{variants:a,defaultVariants:t}=k,l=Object.keys(a).map(s=>{const l=null==e?void 0:e[s],i=null==t?void 0:t[s];if(null===l)return null;const r=M(l)||M(i);return a[s][r]}),i=e&&Object.entries(e).reduce((e,s)=>{let[a,t]=s;return void 0===t||(e[a]=t),e},{}),r=null==k||null===(s=k.compoundVariants)||void 0===s?void 0:s.reduce((e,s)=>{let{class:a,className:l,...r}=s;return Object.entries(r).every(e=>{let[s,a]=e;return Array.isArray(a)?a.includes({...t,...i}[s]):{...t,...i}[s]===a})?[...e,a,l]:e},[]);return C(L,l,r,null==e?void 0:e.class,null==e?void 0:e.className)});var L,k;function T({className:s,variant:a,...t}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:v(D({variant:a}),s),...t})}function O({className:s,...a}){return e.jsx("div",{"data-slot":"alert-description",className:v("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}function P({tripId:n,route:c,isDriver:d=!1,allowLocationSharing:o=!0,onShareLocation:x}){const[h,u]=s.useState(null),[p,g]=s.useState(!1),[v,w]=s.useState(null),[A,S]=s.useState(null);s.useEffect(()=>()=>{null!==A&&navigator.geolocation.clearWatch(A)},[A]);const M=c.map((e,s)=>({...e,type:0===s?"start":s===c.length-1?"destination":"stop"}));return h&&p&&M.push({lat:h.lat,lng:h.lng,label:d?"Your Location (Driver)":"Your Location",type:"current"}),e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-primary"}),"Live Trip Map"]}),p&&e.jsxs(m,{variant:"default",className:"bg-primary",children:[e.jsx(N,{className:"w-3 h-3 mr-1"}),"Tracking Active"]})]})}),e.jsxs(i,{className:"space-y-4",children:[v&&e.jsxs(T,{variant:"destructive",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx(O,{children:v})]}),o&&e.jsxs("div",{className:"flex gap-2",children:[p?e.jsx(r,{onClick:()=>{null!==A&&(navigator.geolocation.clearWatch(A),S(null)),g(!1),u(null)},variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/10",children:"Stop Sharing"}):e.jsxs(r,{onClick:()=>{if(!navigator.geolocation)return void w("Geolocation is not supported by your browser");w(null);const e=navigator.geolocation.watchPosition(e=>{const s={lat:e.coords.latitude,lng:e.coords.longitude};u(s),g(!0),x&&x(s)},e=>{let s="Unable to retrieve your location";switch(e.code){case e.PERMISSION_DENIED:s="Location permission denied. Please enable location access in your browser settings.";break;case e.POSITION_UNAVAILABLE:s="Location information unavailable";break;case e.TIMEOUT:s="Location request timed out"}w(s),g(!1)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});S(e)},className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Share My Location"]}),p&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-primary/5 text-primary rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm",children:["Location shared with ",d?"passengers":"driver"]})]})]}),e.jsx(j,{locations:M,showRoute:!0,height:"500px"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm",children:"Route Details"}),e.jsx("div",{className:"space-y-2",children:c.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:`\n                  w-6 h-6 rounded-full flex items-center justify-center text-xs\n                  ${0===a?"bg-primary text-primary-foreground":a===c.length-1?"bg-accent text-accent-foreground":"bg-secondary text-secondary-foreground"}\n                `,children:0===a?"A":a===c.length-1?"B":a}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:0===a?"Starting Point":a===c.length-1?"Final Destination":`Stop ${a}`})]})]},a))})]})]})]})}function E(){const[t,l]=s.useState(null),[j,g]=s.useState(!1);return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Trips"}),e.jsx("p",{className:"text-gray-600",children:"Manage your upcoming and past journeys"})]}),e.jsxs(n,{defaultValue:"upcoming",className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(d,{value:"upcoming",children:"Upcoming"}),e.jsx(d,{value:"as-driver",children:"As Driver"}),e.jsx(d,{value:"completed",children:"Completed"})]}),e.jsx(o,{value:"upcoming",className:"space-y-4",children:I.map(s=>e.jsx(a,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"wasel"===s.type?"default":"secondary",children:"wasel"===s.type?"Wasel (واصل)":"Raje3 (راجع)"}),e.jsx(m,{variant:"outline",children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(w,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.seats," seats booked"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:s.driver.initials})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.driver.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.driver.vehicle})]})]})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-primary",children:["$",s.totalPrice]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total price"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>(e=>{l(e),g(!0)})(s),className:"gap-1",children:[e.jsx(N,{className:"w-3 h-3"}),"Track Live"]}),e.jsx(r,{variant:"outline",size:"sm",children:"Contact Driver"}),e.jsx(r,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"Cancel"})]})]})]})})},s.id))}),e.jsx(o,{value:"as-driver",className:"space-y-4",children:R.map(s=>e.jsx(a,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"wasel"===s.type?"default":"secondary",children:"wasel"===s.type?"Wasel (واصل)":"Raje3 (راجع)"}),e.jsxs(m,{variant:"outline",children:[s.booked,"/",s.totalSeats," seats booked"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(w,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.date," at ",s.time]})]}),s.passengers.length>0&&e.jsxs("div",{className:"pt-3 border-t",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Passengers:"}),e.jsx("div",{className:"space-y-2",children:s.passengers.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:s.initials})}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-gray-500",children:["• ",s.seats," seat(s)"]})]},a))})]})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-primary",children:["$",s.earnings]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Est. earnings"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(r,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"Cancel Trip"})]})]})]})})},s.id))}),e.jsx(o,{value:"completed",className:"space-y-4",children:z.map(s=>e.jsx(a,{className:"opacity-75",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"}),e.jsx(m,{variant:"wasel"===s.type?"default":"secondary",children:"wasel"===s.type?"Wasel":"Raje3"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx(w,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.to})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.date})]}),e.jsxs("div",{className:"flex lg:flex-col items-end justify-between lg:justify-start gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl",children:["$",s.price]})}),e.jsx(r,{variant:"outline",size:"sm",children:"Rate Driver"})]})]})})},s.id))})]}),t&&e.jsx(x,{open:j,onOpenChange:g,children:e.jsxs(h,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(u,{children:e.jsx(p,{children:"Live Trip Tracking"})}),e.jsx(P,{tripId:t.id.toString(),route:t.route||[],isDriver:!1,allowLocationSharing:!0,onShareLocation:e=>{}})]})})]})}const I=[{id:1,type:"wasel",status:"Confirmed",from:"Dubai",to:"Abu Dhabi",date:"Oct 3, 2025",time:"08:00 AM",seats:2,totalPrice:90,driver:{name:"Ahmed Hassan",initials:"AH",vehicle:"Toyota Camry • White"},route:[{label:"Dubai Mall",lat:25.1972,lng:55.2744},{label:"Dubai Marina",lat:25.0805,lng:55.1396},{label:"Jebel Ali",lat:24.9857,lng:55.0272},{label:"Abu Dhabi Downtown",lat:24.4539,lng:54.3773}]},{id:2,type:"raje3",status:"Pending",from:"Riyadh",to:"Jeddah",date:"Oct 5, 2025",time:"06:00 AM",seats:1,totalPrice:120,driver:{name:"Sarah Mohammed",initials:"SM",vehicle:"Honda Accord • Silver"},route:[{label:"Riyadh City Center",lat:24.7136,lng:46.6753},{label:"Al Qassim",lat:26.326,lng:43.975},{label:"Medina",lat:24.5247,lng:39.5692},{label:"Jeddah Corniche",lat:21.5433,lng:39.1728}]}],R=[{id:1,type:"wasel",from:"Cairo",to:"Alexandria",date:"Oct 4, 2025",time:"10:00 AM",totalSeats:4,booked:2,pricePerSeat:35,earnings:70,passengers:[{name:"Mohamed Ali",initials:"MA",seats:1},{name:"Layla Ahmed",initials:"LA",seats:1}],route:[{label:"Cairo Downtown",lat:30.0444,lng:31.2357},{label:"Giza Pyramids",lat:29.9792,lng:31.1342},{label:"Wadi El Natrun",lat:30.3833,lng:30.35},{label:"Alexandria Corniche",lat:31.2001,lng:29.9187}]}],z=[{id:1,type:"wasel",from:"Amman",to:"Aqaba",date:"Sep 28, 2025",price:65},{id:2,type:"raje3",from:"Manama",to:"Muharraq",date:"Sep 25, 2025",price:20}];export{E as MyTrips};
